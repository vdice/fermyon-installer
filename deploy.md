# Deploying to Fermyon

Once Fermyon is up and running via your
[installer of choice](./README.md#installers) and you've prepared your
environment with relevant values for Hippo and Bindle, you're ready to deploy
your first app.

## Prerequisites

For building and deploying Spin apps on Fermyon, you'll need the
[Spin CLI](https://developer.fermyon.com/spin/quickstart). The following example uses
Spin [v0.10.1](https://github.com/fermyon/spin/releases/tag/v0.10.1).

## Example flow

First, install the example application templates via Spin:

```console
$ spin templates install --git https://github.com/fermyon/spin --update
Copying remote template source
Installing template redis-rust...
Installing template static-fileserver...
Installing template http-grain...
Installing template http-swift...
Installing template http-php...
Installing template http-c...
Installing template redirect...
Installing template http-rust...
Installing template http-go...
Installing template http-zig...
Installing template http-empty...
Installing template redis-go...
Installed 12 template(s)

+------------------------------------------------------------------------+
| Name                Description                                        |
+========================================================================+
| http-c              HTTP request handler using C and the Zig toolchain |
| http-empty          HTTP application with no components                |
| http-go             HTTP request handler using (Tiny)Go                |
| http-grain          HTTP request handler using Grain                   |
| http-php            HTTP request handler using PHP                     |
| http-rust           HTTP request handler using Rust                    |
| http-swift          HTTP request handler using SwiftWasm               |
| http-zig            HTTP request handler using Zig                     |
| redirect            Redirects a HTTP route                             |
| redis-go            Redis message handler using (Tiny)Go               |
| redis-rust          Redis message handler using Rust                   |
| static-fileserver   Serves static files from an asset directory        |
+------------------------------------------------------------------------+
```

> See Spin's
[Quickstart guide](https://developer.fermyon.com/spin/quickstart#install-a-template)
for other available template sources.

Here we'll choose the `http-rust` example and create a new app:

```console
$ spin new http-rust myapp
Project description: My first Fermyon app
HTTP base: /
HTTP path: /hello
```

You're ready to navigate into the app directory and build it from source:

```console
$ cd myapp/

$ spin build
<build output omitted>
```

Next, you can log in to the platform using Spin, providing the credentials
generated by your installer mode of choice.

This command will attempt to read URL, username and password values from the
environment. If not present and not passed in as arguments, they can be
entered manually.

As of writing, the platform launched via these installers only supports the
second option, `Sign in with a username and password`.

Here's an example showing how to log in to the platform running locally:

```
$ spin login --url http://hippo.local.fermyon.link
What authentication method does this server support?

1. Sign in with GitHub
2. Sign in with a username and password

Enter a number: 2
Hippo username: newuser
Hippo password:
Bindle URL: http://bindle.local.fermyon.link/v1
Bindle username (blank for unauthenticated):
```

> Be sure to include the trailing `/v1` on the Bindle URL.

Finally, you are ready to deploy:

```console
$ spin deploy
Uploading myapp version 0.1.0+qdbcc2e0...
Deployed myapp version 0.1.0+qdbcc2e0
Waiting for application to become ready.... ready
Available Routes:
  myapp: http://myapp.local.fermyon.link/hello
```

You can then hit your app's served route (`/hello`) via its URL.

```console
$ curl http://myapp.local.fermyon.link/hello
Hello, Fermyon
```

You can also find the app URL by navigating to the Hippo dashboard (`$HIPPO_URL`), loggging in
with the `$HIPPO_USERNAME` and `$HIPPO_PASSWORD` values and then clicking on the app page.

Congratulations, you've deployed your first Fermyon app!

## Deploying new versions of your app

Making changes to your app is as easy as updating the source code, re-building
and re-deploying.

To see this in practice, update the message to `Hello, Fermyon!` in the app's
source code and save your changes. After a fresh build and deploy, the
new version of your app will be live:

```console
$ spin build
<build output omitted>

$ spin deploy
Uploading myapp version 0.1.0+q5202279...
Deployed myapp version 0.1.0+q5202279
Waiting for application to become ready.... ready
Available Routes:
  myapp: http://myapp.local.fermyon.link/hello

$ curl http://myapp.local.fermyon.link/hello
Hello, Fermyon!
```

## Wrapping up

In this guide, we walked through deploying multiple versions of your first
application on Fermyon.

We hope this experience inspires you to explore further. For in-depth guides
and further information, see the
[Spin documentation](https://developer.fermyon.com/spin) or
[Hippo documentation](https://docs.hippofactory.dev/).